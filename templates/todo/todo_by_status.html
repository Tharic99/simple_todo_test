{% extends 'base.html' %}

{% block title %}To-Do's by Status{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>To-Do's by Status</h2>
    <form method="get" action="{% url 'todo:todo_by_status' %}" class="mb-3">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="show_completed" name="show_completed" value="yes" {% if show_completed %}checked{% endif %}>
            <label class="form-check-label" for="show_completed">
                Display Completed Items
            </label>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Apply</button>
    </form>

    {% for status, todos in todos_by_status.items %}
        <h3>{{ status.name }}</h3>
        <ul class="list-group">
            {% for todo in todos %}
                <li class="list-group-item">
                    {{ todo.title }}{% if todo.is_completed %} - Completed{% else %} - Not Completed{% endif %}
                </li>
            {% empty %}
                <li class="list-group-item">No tasks found.</li>
            {% endfor %}
        </ul>
    {% endfor %}
</div>
{% endblock %}
